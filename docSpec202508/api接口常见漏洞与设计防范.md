
api接口常见漏洞与设计防范.md

# sql注入漏洞，，，使用jpa mbts参数化查询解决，
自己拼写的需要转义单引号，并且闭合字符类型参数
非字符串类型的转化为数字类型等
emal等类型，可使用正则表达式验证


# xss漏洞

对输出做 HTML 转义；前端过滤 <script> 等标签；对富文本字段进行白名单处理
# csrf攻击漏洞，jwt 解决
# 重放攻击，使用timestamp+nonce解决
# 幂等接口
# 限流/频控    ip/用户限流

P/User 限流；请求速率控制；异常频率触发黑名单
# 性能稳定性问题，要加大安全冗余
使用mssql

# 缺失审计


# 黑名单白名单机制



🧬 数据越权访问	精细化权限控制（RBAC）；校验请求者身份是否有权访问该资源
🕵️‍♀️ 身份伪造	签名机制（如 HMAC/RSA）；登录态校验；token 有效期、绑定用户 ID/IP
📛 弱口令 & 认证问题	强密码策略；多因素认证；登录失败次数限制与账号锁定机制
📤 文件上传风险	限制上传类型、大小；使用专用中间服务处理文件；病毒扫描
🔄 参数校验不严	使用注解校验（如 @Email、@Pattern）；后端重新校验字段合法性

🔧 JSON 结构攻击	校验 JSON 格式；避免字段结构被覆写（例如 JSON 绕过：__proto__ 等）
📥 业务逻辑漏洞	防止重复下单、越权退款、余额转移；设计操作流程校验点

🧯 接口缺乏幂等性	给敏感操作（支付、下单）设计幂等处理机制，如 clientRequestId 或 out_trade_no
🧰 API 可枚举性	隐藏内部路径；禁用自动化列表 API（如 /users?page=1 可遍历）
🧭 Header 注入	校验并清洗请求头，尤其在代理场景下防止伪造 X-Forwarded-For 等字段



🔐 通用安全建议
所有 API 使用 HTTPS 加密传输

服务端对所有输入进行白名单验证，拒绝非法结构

对敏感接口加审计日志，便于风控和溯源

使用统一的安全中间件过滤层（如鉴权、限流、日志、异常处理）

